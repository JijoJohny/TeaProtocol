# Algorand Vlayer Trustless Notarization System

This implementation provides a trustless notarization system for Algorand that integrates with Stripe for credit card preauthorization.

## Features

- Algorand smart contracts for proof generation and verification
- Stripe integration for credit card preauthorization
- Trustless verification of payment intents
- Support for Algorand addresses
- Secure webhook handling

## Smart Contracts

### Vlayer Prover (`contracts/vlayer_prover.py`)
- Generates cryptographic proofs for Stripe payment intents
- Validates Algorand addresses
- Stores proof data on-chain

### Vlayer Verifier (`contracts/vlayer_verifier.py`)
- Verifies proofs generated by the prover
- Manages user collateral
- Handles payment intent status updates

## Setup

1. Install dependencies:
```bash
pip install -r requirements.txt
```

2. Set up environment variables:
```bash
cp .env.example .env
# Edit .env with your actual configuration
```

3. Deploy smart contracts:
```bash
# Compile the contracts
python contracts/vlayer_prover.py
python contracts/vlayer_verifier.py

# Deploy using goal or other Algorand tools
```

4. Start the API server:
```bash
python main.py
```

## API Endpoints

### Create Payment Intent
```http
POST /create-payment-intent
{
    "amount": 1000,
    "currency": "usd",
    "algo_address": "ALGO_ADDRESS",
    "payment_method_id": "pm_..."
}
```

### Verify Proof
```http
GET /verify-proof/{proof_id}
```

## Integration Flow

1. User initiates credit card preauthorization
2. System creates a Stripe payment intent
3. Vlayer prover generates a cryptographic proof
4. Proof is stored on Algorand blockchain
5. Vlayer verifier validates the proof
6. User's collateral is updated in the system

## Security Considerations

1. Always use HTTPS in production
2. Keep your API keys secure
3. Verify webhook signatures
4. Implement proper error handling
5. Use environment variables for sensitive data
6. Validate Algorand addresses
7. Implement proper access control

## Development

To run tests (when implemented):
```bash
pytest
```

## Contributing

1. Fork the repository
2. Create a feature branch
3. Commit your changes
4. Push to the branch
5. Create a Pull Request 